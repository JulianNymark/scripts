#!/bin/bash

if [ $# -eq 1 ]
then
    if [ ! -d /media/$1 ]
    then
	mkdir -p /media/$1
    fi
    echo -ne '[######                        ](20%)\r'
    mount /dev/disk/by-label/$1 /media/$1
    echo -ne '[############                  ](40%)\r'
    cp -rb /home/julian/important/ /media/$1/backups/
    echo -ne '[##################            ](60%)\r'
    umount /media/$1
    echo -ne '[########################      ](80%)\r'
    rm -r /media/$1
    echo -ne '[##############################](100%)'
    echo "Done!"
elif [ $# -eq 2 ]
then
    if [ ! -d /media/$1 ]
    then
	mkdir -p /media/$1
    fi
    if [ -d /home/julian/$2 ]
    then
	echo -ne '[######                        ](20%)\r'
	mount /dev/disk/by-label/$1 /media/$1
	echo -ne '[############                  ](40%)\r'
	cp -rb /home/julian/$2/ /media/$1/backups/
	echo -ne '[##################            ](60%)\r'
	umount /media/$1
	echo -ne '[########################      ](80%)\r'
	rm -r /media/$1
	echo -ne '[##############################](100%)'
	echo "Done!"
    else
	echo "DIR does not exist!"
    fi
else
    echo "Usage: backup <disk-by-label> [dir-in-home]"
    echo "if DIR is not specified, only important is backed up"
fi